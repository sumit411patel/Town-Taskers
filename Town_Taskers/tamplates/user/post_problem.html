{% extends 'user/common/layout.html' %}
{% block content %}
<script>
  function data(){ 
  var c=document.getElementById("categoryname").value;
  var d=document.getElementById("subcategoryname").value; 
  var j=document.getElementById("cityname").value;
  var k=document.getElementById("areaname").value;
   if(j=="")
   {
    alert("please select city")
    return false;
   }
   else if(k=="")
   {
    alert("please select area")
    return false;
   }
   else if(c=="")
   {
    alert("please select category")
    return false;
   }
   else if(d=="")
   {
    alert("please select subcategory")
    return false;
   }
   else if(a.checked==false && b.checked==false){
    alert("please select gender")
    return false;
   }
   else{
    return true;
   }
  }
</script>
<!-- Page Title -->
<section class="page-title">
  <!-- Container Start -->
  <div class="container">
    <div class="row">
      <div class="col-md-8 offset-md-2 text-center">
        <!-- Title text -->
        <h3>Post Your Problem</h3>
      </div>
    </div>
  </div>
  <!-- Container End -->
</section>
<!-- Page Title End -->

<section class="login py-5 border-top-1">
  <div class="container">
    <div class="row">
      <div class="col-lg-4">
        <div class="sidebar">
          <!-- User Widget -->
          <div class="widget user">
            <!-- User Image -->
            <div class="image d-flex justify-content-center">
              <img src="/media/upload/{{result.user_image}}" alt="" class="">
            </div>
            <!-- User Name -->
            <h5 class="text-center">{{result.user.first_name}} {{result.user.last_name}}</h5>
            <div class="text-center">
              <a href="/user/user_edit_profile" class="btn btn-main-sm">Edit Profile</a>
            </div> 
          </div>
          <!-- Dashboard Links -->
          <div class="widget user-dashboard-menu">
            <ul>
              <li class="active">
                <a href="/user/all_requests"><i class="fa fa-user"></i>All Posts</a></li>
              <li>
                <a href="/user/post_problem"><i class="fa fa-bookmark-o"></i>Add Post</a>
              </li>
              <li>
                <a href="/user/changepass"><i class="fa fa-file-archive-o"></i>Change Password</a>
              </li>
              <li>
                <a href="/user/logout"><i class="fa fa-cog"></i> Logout</a>
              </li>
              <!-- <li>
                <a href="#!" data-toggle="modal" data-target="#deleteaccount"><i class="fa fa-power-off"></i>Delete Account</a>
              </li> -->
            </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-8 col-md-8 align-item-center">
        <div class="border border">
          <h3 class="bg-gray p-4 text-center">Post</h3>
          <form method="post" onsubmit="return data()" action="/user/post_problem_store" enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset class="p-4">
              <div class="text-center">
                {% if messages %}
              <ul class="messages">
              {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
              {% endfor %}
              </ul>
              {% endif %}
              </div>
              
              <div class="form-group">
                <div class="row">
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Category*</label>
                    <select class="form-control mb-3" name="categoryname" id="categoryname" required>
                    <option value="" selected>Select a Category</option>

                    {% for c in categories %}
                    <option value="{{c.id}}">{{c.category_name}}</option>
                    {% endfor %}   
                    </select>
                  </div>
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Sub Category*</label>
                    <select class="form-control mb-3" name="subcategoryname" id="subcategoryname" required>
                    <option value="" selected>Select a Sub Category</option>

                    {% for s in sub_categories %}
                    <option value="{{s.id}}">{{s.sub_category_name}}</option>
                    {% endfor %}   
                  </select> 
                  </div>                
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Subject*</label>
                    <input class="form-control mb-3" type="text" name="subject" id="subject" placeholder="Subject" required>
                  </div>
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Image*</label>
                    <input class="form-control p-2" type="file" name="pimg" id="pimg" required>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Description*</label>
                    <textarea name="pdesc" id="pdesc" class="form-control mb-3 ng-invalid ng-invalid-required ng-valid-pattern ng-touched" rows="3" placeholder="Description*" required></textarea>
                  </div>
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Address*</label>
                    <textarea name="address" id="address" class="form-control mb-3 ng-invalid ng-invalid-required ng-valid-pattern ng-touched" rows="3" placeholder="Address*" required>{{result.address}}</textarea>   
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-lg-6">
                    <label for="exampleInputFile">City*</label>
                    <select class="form-control mb-3" name="cityname" id="cityname" required>
                      <option value="" selected>Select a City</option>

                      {% for cy in cities %}
                      <option value="{{cy.id}}" {% if result.city_id == cy.id %} selected {% endif %}>{{cy.city_name}}</option>
                      {% endfor %}   
                    </select>                    
                  </div>
                  <div class="col-lg-6">
                    <label for="exampleInputFile">Area*</label>
                    <select class="form-control mb-3" name="areaname" id="areaname" required>
                      <option value="" selected>Select a Area</option>

                      {% for a in areas %}
      <option value="{{a.id}}" {% if result.area_id == a.id %} selected {% endif %}>{{a.area_name}}</option>
                      {% endfor %}   
                    </select>   
                  </div>
                </div>
              </div>
              <div class="form-group text-center">
                <button type="submit" class="btn btn-primary font-weight-bold mt-3">Post</button>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}